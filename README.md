# Google Maps Bulk Reviews Scraper

Scrapes the most recent Google Maps reviews in bulk. Point it at a root folder, and it will discover projects, read a Google Maps reviews URL from each project, and write out a fresh `output.json` per project.

## TODO
- Git commit/push for detected repos
- "Example" runs/reviews directory in current repo

## Features

- Bulk discovery: Scans surrounding directories to find projects in need of review scraping.
- Configurable layout: Supports a customizable reviews folder input URL filename, and output filename.
- Per-project runs: Reads one URL per project and writes `output.json` alongside it.

## Installation

- Install the latest version of Google Chrome.
- Install Python packages from `requirements.txt` (Python 3.9 is required).

## Project layout and conventions

Each project you want to scrape should contain a “reviews area” with a text file holding the target Google Maps URL.

- Reviews directory (default): `frontend/src/reviews/`
- URL file (default): `url.txt`
- Output file (per project): `output.json`

Example structure:

```
root/
  this-repo/
    main.py
  project-a/
    frontend/
      src/
        reviews/
          url.txt        # Google Maps reviews URL for Project A
          output.json    # Generated by the scraper
  project-b/
    frontend/
      src/
        reviews/
          url.txt
          output.json
```

You can change the reviews folder name and URL filename. See the “Configuration” section below.

## Usage

Run the bulk scraper from this repository’s root:

```
python main.py
```

Behavior:

- Recursively walks the current directory to find projects containing the configured reviews subpath and URL file.
- For each match, scrapes the most recent reviews and writes/updates that project’s `output.json`.
- If you only place a single `reviews/url.txt` in this repo, it will behave like a single-project run.

### Adding URLs

1. In each project’s reviews folder, create the URL file (default `frontend/src/reviews/url.txt`).
2. In Google Maps, open the place/POI, click the reviews count, then copy the resulting URL.
3. Paste that URL into the project’s `url.txt`.

## CLI reference

```
usage: main.py [-h] [-p PATH] [-n NUM] [-i INPUT] [-o OUTPUT] [-s SORT] [-d]

Google Maps reviews scraper.

options:
  -h, --help            show this help message and exit
  -p PATH, --path PATH  path to the reviews folder (default: frontend/src/reviews)
  -n NUM, --num NUM     number of reviews to scrape (default: 20)
  -i INPUT, --input INPUT
                        input file containing URL (default: url.txt)
  -o OUTPUT, --output OUTPUT
                        output file for scraped reviews (default: output.json)
  -s SORT, --sort SORT  most_relevant, newest, highest_rating or lowest_rating (default: newest)
  -d, --debug           run scraper using browser graphical interface
```

- The `--path` value is treated as a relative subpath to search for in each discovered project while scanning recursively from the current directory. Put your `url.txt` inside that folder per project.
- The `--input` filename is looked for within the `--path` folder in each project.
- The `--output` file is written next to the input file for each project.

### Examples

Run with all defaults (scans for `frontend/src/reviews/url.txt`):

```
python main.py
```

Use a different reviews folder name (e.g., `data/`) across projects:

```
python main.py -p data
```

Scrape 50 newest reviews and write to a custom filename:

```
python main.py -n 50 -s newest -o reviews-latest.json
```

## Credits

`googlemaps.py` is lightly modified from [gaspa93/googlemaps-scraper](https://github.com/gaspa93/googlemaps-scraper). See the related [Medium post](https://medium.com/data-science/scraping-google-maps-reviews-in-python-2b153c655fc2).

Bulk orchestration and project discovery are provided by `main.py` in this repository.